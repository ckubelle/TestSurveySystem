<!--- Creates the form for the test/survey --->
<!--- This field prints the test name --->

<h1>
  Your Survey Results for: <i>{{ testArray[0].testTitle }}</i>
</h1>

<div
  *ngFor="let question of testArray[0].questions; index as i"
  fxLayout="column"
  fxLayoutAlign="space-around center"
>
  <mat-card style="width: 110%; padding: 20px">
    <div fxLayout="column" fxLayoutAlign="space-between start">
      <!-- This is where you print out the original format of the questions-->
      <mat-card-content>
        <h3 class="mat-headline">Question #{{ i + 1 }}</h3>
      </mat-card-content>
      <mat-card-title>{{ question.questionTitle }}</mat-card-title>

      <div
        *ngIf="question.questionType == 'mc' || question.questionType == 'mmc'"
      >
        <mat-card-subtitle
          >Options: {{ question.mcoption1 }}, {{ question.mcoption2 }},
          {{ question.mcoption3 }}, {{ question.mcoption4 }}</mat-card-subtitle
        >
      </div>

      <div *ngIf="question.questionType == 'ra'">
        <mat-card-subtitle
          >Options: {{ question.rankAnswer1 }}, {{ question.rankAnswer2 }},
          {{ question.rankAnswer3 }},
          {{ question.rankAnswer4 }}</mat-card-subtitle
        >
      </div>

      <div *ngIf="question.questionType == 'ma'">
        <mat-card-subtitle
          >Options: [{{ question.leftanswer1 }}, {{ question.leftanswer2 }}] [{{
            question.rightanswer1
          }}, {{ question.rightanswer2 }}]</mat-card-subtitle
        >
      </div>

      <div *ngFor="let item of testArray" fxLayout="row">
        <!-- This is where we need to format the responses to the survey-->
        <b>{{ item.takerName }}: &nbsp;</b>
        <div
          *ngIf="
            question.questionType == 'sa' ||
            question.questionType == 'ea' ||
            question.questionType == 'tf'
          "
        >
          {{ item.questions[i].submittedAnswer }}
        </div>

        <div *ngIf="question.questionType == 'mc'">
          <div *ngIf="item.questions[i].submittedAnswer == 'mc1'">
            {{ question.mcoption1 }}
          </div>
          <div *ngIf="item.questions[i].submittedAnswer == 'mc2'">
            {{ question.mcoption2 }}
          </div>
          <div *ngIf="item.questions[i].submittedAnswer == 'mc3'">
            {{ question.mcoption3 }}
          </div>
          <div *ngIf="item.questions[i].submittedAnswer == 'mc4'">
            {{ question.mcoption4 }}
          </div>
        </div>

        <div *ngIf="question.questionType == 'mmc'" fxLayout="row">
          <div
            *ngFor="
              let eachAnswer of item.questions[i].submittedAnswer;
              index as j
            "
            fxLayout="row"
          >
            <div *ngIf="eachAnswer == 'mmc1'">
              {{ question.mcoption1 }}
            </div>
            <div *ngIf="eachAnswer == 'mmc2'">
              {{ question.mcoption2 }}
            </div>
            <div *ngIf="eachAnswer == 'mmc3'">
              {{ question.mcoption3 }}
            </div>
            <div *ngIf="eachAnswer == 'mmc4'">
              {{ question.mcoption4 }}
            </div>
            <p *ngIf="j + 1 < item.questions[i].submittedAnswer.length">
              ,&nbsp;
            </p>
          </div>
        </div>
      </div>
    </div>
  </mat-card>
  <br />
</div>
