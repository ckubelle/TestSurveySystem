<!--- Creates the form for the test/survey --->
<form
  [formGroup]="formTaking"
  *ngIf="!success && formTaking"
  fxLayout="column"
  fxLayoutAlign="center"
  id="padding"
>
  <!--- This field prints the test name --->
  <mat-label>{{ formTaking.value.testTitle }}</mat-label>

  <!--- This function counts and displays the number of questions --->
  <div *ngFor="let count of mySurveysTakenArray.get(0).questions.length">

    <mat-card style="width: 110%; padding: 20px">
        <div fxLayout="column" fxLayoutAlign="space-between start">
        <mat-card-title>{{ mySurveysTakenArray.get(0).questions[count].value.questionTitle }}</mat-card-title>
        <mat-card-content>
            <h3 class="mat-headline">Question #{{ count + 1 }}</h3>
        </mat-card-content>
        <div *ngIf="indiForm.question[count].value.questionType === 'mc'">
            <mat-card-subtitle> Multiple Choice </mat-card-subtitle>
            <mat-radio-group
              class="example-radio-group"
              aria-label="mcchoices"
              formControlName="submittedAnswer"
              fxLayout="column"
            >
              <mat-radio-button
                class="example-radio-button"
                color="primary"
                value="mc1"
              >
                <mat-label>{{ question.value.mcoption1 }}</mat-label>
              </mat-radio-button>
              <mat-radio-button
                class="example-radio-button"
                color="primary"
                value="mc2"
              >
                <mat-label>{{ question.value.mcoption2 }}</mat-label>
              </mat-radio-button>
              <mat-radio-button
                class="example-radio-button"
                color="primary"
                value="mc3"
              >
                <mat-label>{{ question.value.mcoption3 }}</mat-label>
              </mat-radio-button>
              <mat-radio-button
                class="example-radio-button"
                color="primary"
                value="mc4"
              >
                <mat-label>{{ question.value.mcoption4 }}</mat-label>
              </mat-radio-button>
            </mat-radio-group>
          </div>

          <div *ngIf="question.value.questionType === 'sa'">
            <mat-card-subtitle> Short Answer </mat-card-subtitle>
            <mat-form-field>
              <input
                matInput
                placeholder="Your Answer"
                formControlName="submittedAnswer"
              />
            </mat-form-field>
          </div>

          <div *ngIf="question.value.questionType === 'ea'" class="essay">
            <mat-card-subtitle> Essay Answer </mat-card-subtitle>
            <mat-form-field [style.width.px]="400">
              <input
                matInput
                placeholder="Your Answer"
                formControlName="submittedAnswer"
              />
            </mat-form-field>
          </div>

          <div *ngIf="question.value.questionType === 'mmc'">
            <mat-card-subtitle> Checkbox Question </mat-card-subtitle>
            <mat-selection-list formControlName="submittedAnswer">
              <mat-list-option color="primary" value="mmc1">
                <mat-label>{{ question.value.mcoption1 }}</mat-label>
              </mat-list-option>
              <mat-list-option color="primary" value="mmc2">
                <mat-label>{{ question.value.mcoption2 }}</mat-label>
              </mat-list-option>
              <mat-list-option color="primary" value="mmc3">
                <mat-label>{{ question.value.mcoption3 }}</mat-label>
              </mat-list-option>
              <mat-list-option color="primary" value="mmc4">
                <mat-label>{{ question.value.mcoption4 }}</mat-label>
              </mat-list-option>
            </mat-selection-list>
          </div>

          <div *ngIf="question.value.questionType === 'tf'">
            <mat-card-subtitle> True or False </mat-card-subtitle>
            <mat-radio-group
              aria-label="True or False"
              formControlName="submittedAnswer"
            >
              <mat-radio-button color="primary" value="True">
                True
              </mat-radio-button>
              <mat-radio-button color="primary" value="False">
                False
              </mat-radio-button>
            </mat-radio-group>
          </div>

          <div *ngIf="question.value.questionType === 'ra'">
            <mat-card-subtitle> Ranking </mat-card-subtitle>
            <mat-grid-list cols="2" rowHeight="2:1" class="grid-layout-rank">
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Give rank"
                  formControlName="submittedRankAnswer1"
              /></mat-grid-tile>
              <mat-grid-tile>{{ question.value.rankAnswer1 }}</mat-grid-tile>
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Give rank"
                  formControlName="submittedRankAnswer2"
              /></mat-grid-tile>
              <mat-grid-tile>{{ question.value.rankAnswer2 }}</mat-grid-tile>
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Give rank"
                  formControlName="submittedRankAnswer3"
              /></mat-grid-tile>
              <mat-grid-tile>{{ question.value.rankAnswer3 }}</mat-grid-tile>
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Give rank"
                  formControlName="submittedRankAnswer4"
              /></mat-grid-tile>
              <mat-grid-tile>{{ question.value.rankAnswer4 }}</mat-grid-tile>
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Give rank"
                  formControlName="submittedRankAnswer5"
              /></mat-grid-tile>
              <mat-grid-tile>{{ question.value.rankAnswer5 }}</mat-grid-tile>
            </mat-grid-list>
          </div>

          <div class="row" *ngIf="question.value.questionType === 'ma'">
            <mat-card-subtitle> Matching Question </mat-card-subtitle>
            <mat-card-content>
              Items to match: {{ question.value.leftanswer1 }},
              {{ question.value.leftanswer2 }},
              {{ question.value.rightanswer1 }},
              {{ question.value.rightanswer2 }}
            </mat-card-content>

            <mat-grid-list cols="2" rowHeight="2:1" class="grid-layout-match">
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Matching Answer 1 Left"
                  formControlName="submittedLeftanswer1"
              /></mat-grid-tile>
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Matching Answer 1 Right"
                  formControlName="submittedRightanswer1"
              /></mat-grid-tile>
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Matching Answer 2 Left"
                  formControlName="submittedLeftanswer2"
              /></mat-grid-tile>
              <mat-grid-tile
                ><input
                  matInput
                  placeholder="Matching Answer 2 Right"
                  formControlName="submittedRightanswer2"
              /></mat-grid-tile>
            </mat-grid-list>
          </div>
        </div>

  <div *ngFor="let indiForm of mySurveysTakenArray; let j = index">

        <!--- This field displays the types of questions --->
        <p>{{indiForm.takerName}}{{indiForm.questions[count].submittedAnswer}}</p>
            
        </mat-card>
        <br />
      </div>
    </div>
</div>
</div>

    <!--- Display buttons to add questions and to submit --->
    <br />

    <br />
    <button
      mat-raised-button
      type="submit"
      (click)="submitHandler()"
      [disabled]="formTaking.invalid"
      color="primary"
    >
      Submit
    </button>
</form>

<!--- If the form has been submitted --->
<div
  *ngIf="success"
  id="extraSpace"
  fxLayout="column"
  fxLayoutAlign="end center"
>
  <h1>Your Answers have been recorded!</h1>
  <button routerLink="" mat-raised-button color="primary">
    Return To Home
  </button>
</div>
